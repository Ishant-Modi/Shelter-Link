<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-translate="employer_dashboard_title">
      Employer Dashboard - MigrantConnect
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/tailwind-styles.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2563eb",
              secondary: "#1e40af",
            },
          },
        },
      };
    </script>
  </head>

  <body class="min-h-screen bg-gray-50">
    <!-- Navigation -->
    <nav class="navbar-modern bg-white shadow-lg">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center">
            <i class="fas fa-building text-2xl text-blue-600 mr-3"></i>
            <h1 class="text-xl font-bold text-gray-900">Employer Dashboard</h1>
          </div>

          <div class="flex items-center space-x-4">
            <!-- Notifications -->
            <div class="relative">
              <button
                class="p-2 text-gray-600 hover:text-blue-600 transition-colors"
              >
                <i class="fas fa-bell text-xl"></i>
                <span
                  class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"
                  >3</span
                >
              </button>
            </div>

            <!-- Language Dropdown -->
            <div class="relative" id="languageDropdown">
              <button
                class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
                onclick="toggleLanguageDropdown()"
              >
                <i class="fas fa-globe mr-2"></i>
                <span id="currentLang">English</span>
                <i class="fas fa-chevron-down ml-2"></i>
              </button>
              <div
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50 hidden"
                id="languageMenu"
              >
                <div class="py-1">
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('en')"
                    >English</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('hi')"
                    >हिंदी</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('bn')"
                    >বাংলা</a
                  >
                </div>
              </div>
            </div>

            <!-- Profile Dropdown -->
            <div class="relative" id="profileDropdown">
              <button
                class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors"
                onclick="toggleProfileDropdown()"
              >
                <div
                  class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center"
                >
                  <i class="fas fa-user text-white text-sm"></i>
                </div>
                <span class="text-sm font-medium text-gray-700"
                  >ABC Construction</span
                >
                <i class="fas fa-chevron-down text-gray-400"></i>
              </button>
              <div
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50 hidden"
                id="profileMenu"
              >
                <div class="py-1">
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    >Company Profile</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    >Settings</a
                  >
                  <a
                    href="index.html"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    >Logout</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <div class="gradient-success text-white py-16 mt-16">
      <div class="container mx-auto px-4">
        <div class="text-center">
          <h1 class="text-4xl font-bold mb-4" data-translate="welcome_employer">
            Welcome, ABC Construction
          </h1>
          <p
            class="text-xl text-green-100 mb-8"
            data-translate="employer_subtitle"
          >
            Manage your workforce, post jobs, and find skilled migrant workers
          </p>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="container mx-auto px-4 -mt-8 relative z-10">
      <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div class="text-center p-4 bg-blue-50 rounded-xl">
            <div class="text-3xl font-bold text-blue-600">15</div>
            <div class="text-sm text-gray-600" data-translate="active_jobs">
              Active Job Posts
            </div>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-xl">
            <div class="text-3xl font-bold text-green-600">87</div>
            <div
              class="text-sm text-gray-600"
              data-translate="total_applications"
            >
              Total Applications
            </div>
          </div>
          <div class="text-center p-4 bg-orange-50 rounded-xl">
            <div class="text-3xl font-bold text-orange-600">42</div>
            <div
              class="text-sm text-gray-600"
              data-translate="active_employees"
            >
              Active Employees
            </div>
          </div>
          <div class="text-center p-4 bg-purple-50 rounded-xl">
            <div class="text-3xl font-bold text-purple-600">23</div>
            <div
              class="text-sm text-gray-600"
              data-translate="pending_interviews"
            >
              Pending Interviews
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="container mx-auto px-4 mb-8">
      <div class="bg-white rounded-2xl shadow-lg p-6">
        <h2
          class="text-xl font-semibold text-gray-900 mb-6"
          data-translate="quick_actions"
        >
          Quick Actions
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <button
            onclick="postNewJob()"
            class="flex items-center p-4 bg-blue-50 rounded-xl hover:bg-blue-100 transition-colors"
          >
            <i class="fas fa-plus-circle text-2xl text-blue-600 mr-3"></i>
            <div class="text-left">
              <div
                class="font-semibold text-gray-900"
                data-translate="post_new_job"
              >
                Post New Job
              </div>
              <div class="text-sm text-gray-600">Create job listing</div>
            </div>
          </button>

          <button
            onclick="viewApplications()"
            class="flex items-center p-4 bg-green-50 rounded-xl hover:bg-green-100 transition-colors"
          >
            <i class="fas fa-users text-2xl text-green-600 mr-3"></i>
            <div class="text-left">
              <div
                class="font-semibold text-gray-900"
                data-translate="view_applications"
              >
                View Applications
              </div>
              <div class="text-sm text-gray-600">Review candidates</div>
            </div>
          </button>

          <button
            onclick="manageEmployees()"
            class="flex items-center p-4 bg-purple-50 rounded-xl hover:bg-purple-100 transition-colors"
          >
            <i class="fas fa-id-badge text-2xl text-purple-600 mr-3"></i>
            <div class="text-left">
              <div
                class="font-semibold text-gray-900"
                data-translate="manage_employees"
              >
                Manage Employees
              </div>
              <div class="text-sm text-gray-600">Employee records</div>
            </div>
          </button>

          <button
            onclick="viewReports()"
            class="flex items-center p-4 bg-orange-50 rounded-xl hover:bg-orange-100 transition-colors"
          >
            <i class="fas fa-chart-bar text-2xl text-orange-600 mr-3"></i>
            <div class="text-left">
              <div
                class="font-semibold text-gray-900"
                data-translate="view_reports"
              >
                View Reports
              </div>
              <div class="text-sm text-gray-600">Analytics & insights</div>
            </div>
          </button>
        </div>
      </div>
    </div>

    <!-- Recent Job Posts -->
    <div class="container mx-auto px-4 mb-8">
      <div class="bg-white rounded-2xl shadow-lg p-6">
        <div class="flex justify-between items-center mb-6">
          <h2
            class="text-xl font-semibold text-gray-900"
            data-translate="recent_job_posts"
          >
            Recent Job Posts
          </h2>
          <button onclick="postNewJob()" class="btn-primary-modern">
            <i class="fas fa-plus mr-2"></i>
            Post New Job
          </button>
        </div>

        <div id="jobPostsList" class="space-y-4">
          <!-- Job posts will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Recent Applications -->
    <div class="container mx-auto px-4 mb-8">
      <div class="bg-white rounded-2xl shadow-lg p-6">
        <div class="flex justify-between items-center mb-6">
          <h2
            class="text-xl font-semibold text-gray-900"
            data-translate="recent_applications"
          >
            Recent Applications
          </h2>
          <button onclick="viewApplications()" class="btn-outline-modern">
            View All Applications
          </button>
        </div>

        <div id="applicationsList" class="space-y-4">
          <!-- Applications will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Employee Management -->
    <div class="container mx-auto px-4 mb-8">
      <div class="bg-white rounded-2xl shadow-lg p-6">
        <div class="flex justify-between items-center mb-6">
          <h2
            class="text-xl font-semibold text-gray-900"
            data-translate="employee_overview"
          >
            Employee Overview
          </h2>
          <button onclick="manageEmployees()" class="btn-outline-modern">
            Manage All Employees
          </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="card-feature">
            <div class="text-center mb-4">
              <i class="fas fa-hard-hat text-4xl text-blue-600 mb-3"></i>
              <h3 class="text-lg font-semibold text-gray-900">
                Construction Workers
              </h3>
            </div>
            <div class="space-y-2 text-sm text-gray-700 mb-4">
              <div class="flex justify-between">
                <span>Active:</span>
                <span class="font-semibold text-green-600">28 workers</span>
              </div>
              <div class="flex justify-between">
                <span>On Leave:</span>
                <span class="font-semibold text-orange-600">3 workers</span>
              </div>
              <div class="flex justify-between">
                <span>Average Wage:</span>
                <span class="font-semibold">₹450/day</span>
              </div>
            </div>
            <button class="btn-primary-modern w-full">View Details</button>
          </div>

          <div class="card-feature">
            <div class="text-center mb-4">
              <i class="fas fa-tools text-4xl text-green-600 mb-3"></i>
              <h3 class="text-lg font-semibold text-gray-900">
                Skilled Workers
              </h3>
            </div>
            <div class="space-y-2 text-sm text-gray-700 mb-4">
              <div class="flex justify-between">
                <span>Active:</span>
                <span class="font-semibold text-green-600">12 workers</span>
              </div>
              <div class="flex justify-between">
                <span>On Leave:</span>
                <span class="font-semibold text-orange-600">1 worker</span>
              </div>
              <div class="flex justify-between">
                <span>Average Wage:</span>
                <span class="font-semibold">₹650/day</span>
              </div>
            </div>
            <button class="btn-success-modern w-full">View Details</button>
          </div>

          <div class="card-feature">
            <div class="text-center mb-4">
              <i class="fas fa-user-tie text-4xl text-purple-600 mb-3"></i>
              <h3 class="text-lg font-semibold text-gray-900">Supervisors</h3>
            </div>
            <div class="space-y-2 text-sm text-gray-700 mb-4">
              <div class="flex justify-between">
                <span>Active:</span>
                <span class="font-semibold text-green-600">2 supervisors</span>
              </div>
              <div class="flex justify-between">
                <span>On Leave:</span>
                <span class="font-semibold text-gray-600">0 supervisors</span>
              </div>
              <div class="flex justify-between">
                <span>Average Wage:</span>
                <span class="font-semibold">₹1200/day</span>
              </div>
            </div>
            <button class="btn-secondary-modern w-full">View Details</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Post Job Modal -->
    <div
      class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 hidden"
      id="postJobModal"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto"
      >
        <div class="p-6 border-b border-gray-100">
          <div class="flex justify-between items-center">
            <h3 class="text-xl font-semibold text-gray-900">Post New Job</h3>
            <button
              onclick="closePostJobModal()"
              class="text-gray-400 hover:text-gray-600"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div class="p-6">
          <form id="postJobForm" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Job Title *</label
                >
                <input
                  type="text"
                  class="form-input-modern"
                  required
                  placeholder="e.g., Construction Worker"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Job Category *</label
                >
                <select class="form-select-modern" required>
                  <option value="">Select Category</option>
                  <option value="construction">Construction</option>
                  <option value="manufacturing">Manufacturing</option>
                  <option value="domestic">Domestic Work</option>
                  <option value="delivery">Delivery Services</option>
                  <option value="retail">Retail</option>
                  <option value="agriculture">Agriculture</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Job Description *</label
              >
              <textarea
                class="form-input-modern"
                rows="4"
                required
                placeholder="Describe the job responsibilities, requirements, and working conditions..."
              ></textarea>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Salary/Wage *</label
                >
                <div class="flex">
                  <span
                    class="inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md"
                    >₹</span
                  >
                  <input
                    type="number"
                    class="form-input-modern rounded-l-none"
                    required
                    placeholder="Amount"
                  />
                  <select class="form-select-modern rounded-l-none">
                    <option value="daily">Per Day</option>
                    <option value="monthly">Per Month</option>
                    <option value="hourly">Per Hour</option>
                  </select>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Number of Positions *</label
                >
                <input
                  type="number"
                  class="form-input-modern"
                  required
                  placeholder="e.g., 5"
                  min="1"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Work Location *</label
                >
                <input
                  type="text"
                  class="form-input-modern"
                  required
                  placeholder="e.g., Construction Site, Delhi"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Employment Type *</label
                >
                <select class="form-select-modern" required>
                  <option value="">Select Type</option>
                  <option value="full-time">Full Time</option>
                  <option value="part-time">Part Time</option>
                  <option value="contract">Contract</option>
                  <option value="temporary">Temporary</option>
                </select>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Required Skills</label
              >
              <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Construction Experience</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Physical Fitness</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Team Work</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Safety Awareness</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Tool Handling</span>
                </label>
                <label class="flex items-center">
                  <input type="checkbox" class="mr-2 rounded" />
                  <span class="text-sm">Local Language</span>
                </label>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Application Deadline</label
              >
              <input type="date" class="form-input-modern" />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Additional Benefits</label
              >
              <textarea
                class="form-input-modern"
                rows="3"
                placeholder="e.g., Food provided, Accommodation available, Medical insurance, etc."
              ></textarea>
            </div>

            <div class="flex space-x-3 pt-4">
              <button type="submit" class="btn-primary-modern flex-1">
                <i class="fas fa-paper-plane mr-2"></i>
                Post Job
              </button>
              <button
                type="button"
                onclick="closePostJobModal()"
                class="btn-outline-modern"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/language.js"></script>
    <script>
      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        loadLanguage(getCurrentLanguage());
        loadJobPosts();
        loadApplications();
        setupEventListeners();
      });

      function toggleLanguageDropdown() {
        const menu = document.getElementById("languageMenu");
        menu.classList.toggle("hidden");
      }

      function toggleProfileDropdown() {
        const menu = document.getElementById("profileMenu");
        menu.classList.toggle("hidden");
      }

      // Close dropdowns when clicking outside
      document.addEventListener("click", function (event) {
        const langDropdown = document.getElementById("languageDropdown");
        const langMenu = document.getElementById("languageMenu");
        const profileDropdown = document.getElementById("profileDropdown");
        const profileMenu = document.getElementById("profileMenu");

        if (!langDropdown.contains(event.target)) {
          langMenu.classList.add("hidden");
        }

        if (!profileDropdown.contains(event.target)) {
          profileMenu.classList.add("hidden");
        }
      });

      function setupEventListeners() {
        // Post job form submit
        document
          .getElementById("postJobForm")
          .addEventListener("submit", handlePostJobSubmit);
      }

      function loadJobPosts() {
        const jobPosts = [
          {
            id: "JOB001",
            title: "Construction Worker",
            location: "Delhi Construction Site",
            salary: "₹450/day",
            posted: "2 days ago",
            applications: 15,
            status: "active",
          },
          {
            id: "JOB002",
            title: "Skilled Mason",
            location: "Gurgaon Project",
            salary: "₹650/day",
            posted: "1 week ago",
            applications: 8,
            status: "active",
          },
          {
            id: "JOB003",
            title: "Security Guard",
            location: "Office Complex, Noida",
            salary: "₹12,000/month",
            posted: "3 days ago",
            applications: 22,
            status: "active",
          },
        ];

        const container = document.getElementById("jobPostsList");
        container.innerHTML = jobPosts
          .map(
            (job) => `
          <div class="card-modern p-4 hover:shadow-lg transition-shadow">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-lg font-semibold text-gray-900">${job.title}</h3>
                <p class="text-sm text-gray-600">${job.location}</p>
              </div>
              <span class="badge-modern badge-success-modern">${job.status}</span>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 text-sm">
              <div>
                <span class="text-gray-500">Salary:</span>
                <div class="font-medium text-green-600">${job.salary}</div>
              </div>
              <div>
                <span class="text-gray-500">Posted:</span>
                <div class="font-medium">${job.posted}</div>
              </div>
              <div>
                <span class="text-gray-500">Applications:</span>
                <div class="font-medium text-blue-600">${job.applications}</div>
              </div>
              <div>
                <span class="text-gray-500">Job ID:</span>
                <div class="font-medium">${job.id}</div>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <button class="btn-primary-modern">View Applications</button>
              <button class="btn-outline-modern">Edit Job</button>
              <button class="btn-danger-modern">Close Job</button>
            </div>
          </div>
        `
          )
          .join("");
      }

      function loadApplications() {
        const applications = [
          {
            id: "APP001",
            applicantName: "Rajesh Kumar",
            jobTitle: "Construction Worker",
            experience: "5 years",
            location: "Bihar",
            appliedDate: "2025-07-10",
            status: "pending",
          },
          {
            id: "APP002",
            applicantName: "Suresh Singh",
            jobTitle: "Skilled Mason",
            experience: "8 years",
            location: "Uttar Pradesh",
            appliedDate: "2025-07-09",
            status: "shortlisted",
          },
          {
            id: "APP003",
            applicantName: "Mohammed Ali",
            jobTitle: "Security Guard",
            experience: "3 years",
            location: "West Bengal",
            appliedDate: "2025-07-08",
            status: "interviewed",
          },
        ];

        const container = document.getElementById("applicationsList");
        container.innerHTML = applications
          .map(
            (app) => `
          <div class="card-modern p-4 hover:shadow-lg transition-shadow">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="text-lg font-semibold text-gray-900">${
                  app.applicantName
                }</h3>
                <p class="text-sm text-gray-600">Applied for: ${
                  app.jobTitle
                }</p>
              </div>
              <span class="badge-modern ${getApplicationStatusBadge(
                app.status
              )}">${app.status}</span>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 text-sm">
              <div>
                <span class="text-gray-500">Experience:</span>
                <div class="font-medium">${app.experience}</div>
              </div>
              <div>
                <span class="text-gray-500">Location:</span>
                <div class="font-medium">${app.location}</div>
              </div>
              <div>
                <span class="text-gray-500">Applied:</span>
                <div class="font-medium">${app.appliedDate}</div>
              </div>
              <div>
                <span class="text-gray-500">App ID:</span>
                <div class="font-medium">${app.id}</div>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <button class="btn-primary-modern">View Profile</button>
              <button class="btn-success-modern">Schedule Interview</button>
              <button class="btn-outline-modern">Contact</button>
            </div>
          </div>
        `
          )
          .join("");
      }

      function getApplicationStatusBadge(status) {
        const badges = {
          pending: "badge-warning-modern",
          shortlisted: "badge-info-modern",
          interviewed: "badge-primary-modern",
          selected: "badge-success-modern",
          rejected: "badge-danger-modern",
        };
        return badges[status] || "badge-info-modern";
      }

      function postNewJob() {
        document.getElementById("postJobModal").classList.remove("hidden");
        document.getElementById("postJobModal").style.display = "flex";
        document.body.style.overflow = "hidden";
      }

      function closePostJobModal() {
        document.getElementById("postJobModal").classList.add("hidden");
        document.getElementById("postJobModal").style.display = "none";
        document.body.style.overflow = "auto";
      }

      function viewApplications() {
        alert("Opening detailed applications view...");
      }

      function manageEmployees() {
        alert("Opening employee management panel...");
      }

      function viewReports() {
        alert("Opening analytics and reports dashboard...");
      }

      function handlePostJobSubmit(e) {
        e.preventDefault();

        // Show success message
        alert(
          "Job posted successfully! Your job listing is now live and workers can apply."
        );

        closePostJobModal();

        // Reset form
        e.target.reset();

        // Refresh job posts list
        loadJobPosts();
      }

      function getCurrentLanguage() {
        return localStorage.getItem("selectedLanguage") || "en";
      }
    </script>
  </body>
</html>
