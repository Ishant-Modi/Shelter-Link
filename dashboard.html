<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shelter Link - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/tailwind-styles.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2563eb",
              secondary: "#1e40af",
            },
          },
        },
      };
    </script>
  </head>

  <body class="min-h-screen bg-gray-50">
    <!-- Offline Banner -->
    <div
      id="offline-banner"
      class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 text-center hidden"
    >
      <i class="fas fa-exclamation-triangle mr-2"></i>
      <span data-translate="offline_warning"
        >⚠️ You're offline – showing cached data</span
      >
    </div>

    <!-- Navigation -->
    <nav class="navbar-modern bg-white shadow-lg">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center">
            <a
              href="dashboard.html"
              class="flex items-center text-xl font-bold text-blue-600"
            >
              <i class="fas fa-home mr-2"></i>
              Shelter Link
            </a>
          </div>

          <div class="flex items-center space-x-4">
            <!-- Language Dropdown -->
            <div class="relative" id="languageDropdown">
              <button
                class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
                onclick="toggleLanguageDropdown()"
              >
                <i class="fas fa-globe mr-2"></i>
                <span data-translate="language">Language</span>
                <i class="fas fa-chevron-down ml-2"></i>
              </button>
              <div
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50 hidden"
                id="languageMenu"
              >
                <div class="py-1">
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('en')"
                    >English</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('hi')"
                    >हिंदी</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('bn')"
                    >বাংলা</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('te')"
                    >తెలుగు</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('ta')"
                    >தமிழ்</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('mr')"
                    >मराठी</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('gu')"
                    >ગુજરાતી</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('kn')"
                    >ಕನ್ನಡ</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('ml')"
                    >മലയാളം</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('pa')"
                    >ਪੰਜਾਬੀ</a
                  >
                  <a
                    href="#"
                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    onclick="changeLanguage('or')"
                    >ଓଡ଼ିଆ</a
                  >
                </div>
              </div>
            </div>

            <!-- Logout Button -->
            <a href="index.html" class="btn-outline-modern">
              <i class="fas fa-sign-out-alt mr-2"></i>
              <span data-translate="logout">Logout</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <div class="gradient-primary text-white py-16">
      <div class="container mx-auto px-4">
        <div class="text-center">
          <h1
            class="text-4xl font-bold mb-4 fade-in"
            data-translate="welcome_message"
          ></h1>
          <p
            class="text-xl text-blue-100 mb-6"
            data-translate="location_status"
          ></p>
          <div
            class="inline-flex items-center bg-white bg-opacity-20 rounded-lg px-4 py-2"
          >
            <i class="fas fa-shield-alt text-green-300 mr-2"></i>
            <span class="text-sm" data-translate="verification_status"
              >Aadhaar Verified</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="container mx-auto px-4 -mt-8 relative z-10">
      <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
        <h2
          class="text-xl font-semibold text-gray-900 mb-4"
          data-translate="quick_actions"
        >
          Quick Actions
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <a
            href="qr.html"
            class="flex flex-col items-center p-4 bg-blue-50 rounded-xl hover:bg-blue-100 transition-colors"
          >
            <i class="fas fa-qrcode text-2xl text-blue-600 mb-2"></i>
            <span
              class="text-sm font-medium text-gray-900"
              data-translate="my_qr"
              >My QR</span
            >
          </a>
          <a
            href="jobs.html"
            class="flex flex-col items-center p-4 bg-green-50 rounded-xl hover:bg-green-100 transition-colors"
          >
            <i class="fas fa-briefcase text-2xl text-green-600 mb-2"></i>
            <span
              class="text-sm font-medium text-gray-900"
              data-translate="find_jobs"
              >Find Jobs</span
            >
          </a>
          <a
            href="grievances.html"
            class="flex flex-col items-center p-4 bg-orange-50 rounded-xl hover:bg-orange-100 transition-colors"
          >
            <i
              class="fas fa-exclamation-triangle text-2xl text-orange-600 mb-2"
            ></i>
            <span
              class="text-sm font-medium text-gray-900"
              data-translate="report_issue"
              >Report Issue</span
            >
          </a>
          <a
            href="welfare.html"
            class="flex flex-col items-center p-4 bg-purple-50 rounded-xl hover:bg-purple-100 transition-colors"
          >
            <i class="fas fa-gift text-2xl text-purple-600 mb-2"></i>
            <span
              class="text-sm font-medium text-gray-900"
              data-translate="benefits"
              >Benefits</span
            >
          </a>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 pb-16">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Available Services -->
        <div class="card-modern p-6">
          <h3
            class="text-xl font-semibold text-gray-900 mb-4"
            data-translate="available_services"
          >
            Available Services
          </h3>
          <div class="grid grid-cols-2 gap-4">
            <a href="food.html" class="card-feature text-center">
              <div class="icon-container icon-success mx-auto">
                <i class="fas fa-utensils"></i>
              </div>
              <h4
                class="font-semibold text-gray-900 mb-2"
                data-translate="food_benefits"
              >
                Food Benefits
              </h4>
              <p
                class="text-sm text-gray-600"
                data-translate="food_description"
              >
                Access subsidized food grains
              </p>
            </a>

            <a href="health.html" class="card-feature text-center">
              <div class="icon-container icon-danger mx-auto">
                <i class="fas fa-heartbeat"></i>
              </div>
              <h4
                class="font-semibold text-gray-900 mb-2"
                data-translate="health_benefits"
              >
                Healthcare
              </h4>
              <p
                class="text-sm text-gray-600"
                data-translate="health_description"
              >
                Medical services anywhere
              </p>
            </a>

            <a href="education.html" class="card-feature text-center">
              <div class="icon-container icon-info mx-auto">
                <i class="fas fa-graduation-cap"></i>
              </div>
              <h4
                class="font-semibold text-gray-900 mb-2"
                data-translate="education_benefits"
              >
                Education
              </h4>
              <p
                class="text-sm text-gray-600"
                data-translate="education_description"
              >
                School admissions
              </p>
            </a>

            <a href="finance.html" class="card-feature text-center">
              <div class="icon-container icon-warning mx-auto">
                <i class="fas fa-coins"></i>
              </div>
              <h4
                class="font-semibold text-gray-900 mb-2"
                data-translate="finance_benefits"
              >
                Finance
              </h4>
              <p
                class="text-sm text-gray-600"
                data-translate="finance_description"
              >
                Banking and loans
              </p>
            </a>
          </div>
        </div>

        <!-- Recent Activities -->
        <div class="card-modern p-6">
          <h3
            class="text-xl font-semibold text-gray-900 mb-4"
            data-translate="recent_activities"
          >
            Recent Activities
          </h3>
          <div class="space-y-4">
            <div class="flex items-center p-3 bg-green-50 rounded-lg">
              <div
                class="icon-container icon-success mr-3"
                style="width: 2.5rem; height: 2.5rem; margin-bottom: 0"
              >
                <i class="fas fa-check text-sm"></i>
              </div>
              <div class="flex-1">
                <p
                  class="font-medium text-gray-900"
                  data-translate="job_application_accepted"
                >
                  Job Application Accepted
                </p>
                <p class="text-sm text-gray-600">Construction Worker - Delhi</p>
                <p class="text-xs text-gray-500">2 days ago</p>
              </div>
            </div>

            <div class="flex items-center p-3 bg-blue-50 rounded-lg">
              <div
                class="icon-container icon-primary mr-3"
                style="width: 2.5rem; height: 2.5rem; margin-bottom: 0"
              >
                <i class="fas fa-utensils text-sm"></i>
              </div>
              <div class="flex-1">
                <p
                  class="font-medium text-gray-900"
                  data-translate="ration_card_updated"
                >
                  Ration Card Updated
                </p>
                <p class="text-sm text-gray-600">New address registered</p>
                <p class="text-xs text-gray-500">1 week ago</p>
              </div>
            </div>

            <div class="flex items-center p-3 bg-orange-50 rounded-lg">
              <div
                class="icon-container icon-warning mr-3"
                style="width: 2.5rem; height: 2.5rem; margin-bottom: 0"
              >
                <i class="fas fa-exclamation text-sm"></i>
              </div>
              <div class="flex-1">
                <p
                  class="font-medium text-gray-900"
                  data-translate="grievance_resolved"
                >
                  Grievance Resolved
                </p>
                <p class="text-sm text-gray-600">Wage payment issue</p>
                <p class="text-xs text-gray-500">2 weeks ago</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
        <div class="stat-card-modern">
          <div class="stat-number-modern">₹45,000</div>
          <div class="stat-label-modern" data-translate="total_earnings">
            Total Earnings
          </div>
          <div class="text-sm text-green-600 mt-1">+15% this month</div>
        </div>

        <div class="stat-card-modern">
          <div class="stat-number-modern">12</div>
          <div class="stat-label-modern" data-translate="completed_jobs">
            Completed Jobs
          </div>
          <div class="text-sm text-blue-600 mt-1">3 this month</div>
        </div>

        <div class="stat-card-modern">
          <div class="stat-number-modern">4.8⭐</div>
          <div class="stat-label-modern" data-translate="rating">Rating</div>
          <div class="text-sm text-gray-600 mt-1">Based on 25 reviews</div>
        </div>
      </div>
    </div>

    <!-- Help Section -->
    <div class="bg-blue-600 text-white py-12">
      <div class="container mx-auto px-4 text-center">
        <h3 class="text-2xl font-bold mb-4" data-translate="need_help">
          Need Help?
        </h3>
        <p class="text-blue-100 mb-6" data-translate="help_description">
          Our support team is here to assist you 24/7
        </p>
        <div class="flex flex-wrap justify-center gap-4">
          <div
            class="flex items-center bg-white bg-opacity-20 rounded-lg px-4 py-2"
          >
            <i class="fas fa-phone mr-2"></i>
            <span data-translate="helpline">Helpline: 1800-XXX-XXXX</span>
          </div>
          <div
            class="flex items-center bg-white bg-opacity-20 rounded-lg px-4 py-2"
          >
            <i class="fas fa-globe mr-2"></i>
            <span data-translate="website">Website: shelterlink.gov.in</span>
          </div>
          <div
            class="flex items-center bg-white bg-opacity-20 rounded-lg px-4 py-2"
          >
            <i class="fas fa-envelope mr-2"></i>
            <span data-translate="email"
              >Email: support@shelterlink.gov.in</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/language.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        checkOfflineStatus();
        updateWelcomeMessage();
      });

      function toggleLanguageDropdown() {
        const menu = document.getElementById("languageMenu");
        menu.classList.toggle("hidden");
      }

      // Close dropdown when clicking outside
      document.addEventListener("click", function (event) {
        const dropdown = document.getElementById("languageDropdown");
        const menu = document.getElementById("languageMenu");

        if (!dropdown.contains(event.target)) {
          menu.classList.add("hidden");
        }
      });

      function updateWelcomeMessage() {
        const migrantId = localStorage.getItem("migrantId");

        // Map migrant IDs to user keys and names
        const userMapping = {
          "MIG-BH-001": {
            key: "ravi_kumar",
            name: "Ravi Kumar",
            current: "Delhi",
            home: "Bihar",
          },
          "MIG-UP-002": {
            key: "priya_sharma",
            name: "Priya Sharma",
            current: "Maharashtra",
            home: "Uttar Pradesh",
          },
          "MIG-WB-003": {
            key: "amit_das",
            name: "Amit Das",
            current: "Karnataka",
            home: "West Bengal",
          },
          "MIG-RJ-004": {
            key: "sunita_devi",
            name: "Sunita Devi",
            current: "Gujarat",
            home: "Rajasthan",
          },
          // Allow direct key lookup as fallback
          ravi_kumar: {
            key: "ravi_kumar",
            name: "Ravi Kumar",
            current: "Delhi",
            home: "Bihar",
          },
          priya_sharma: {
            key: "priya_sharma",
            name: "Priya Sharma",
            current: "Maharashtra",
            home: "Uttar Pradesh",
          },
          amit_das: {
            key: "amit_das",
            name: "Amit Das",
            current: "Karnataka",
            home: "West Bengal",
          },
          sunita_devi: {
            key: "sunita_devi",
            name: "Sunita Devi",
            current: "Gujarat",
            home: "Rajasthan",
          },
        };

        const userInfo = userMapping[migrantId];
        const userName = userInfo ? userInfo.name : "User";
        const currentState = userInfo ? userInfo.current : "Unknown";
        const homeState = userInfo ? userInfo.home : "Unknown";

        // Store the user key for other components
        if (userInfo) {
          localStorage.setItem("currentUserKey", userInfo.key);
        }

        // Store userName and location globally so translation system can use it
        window.currentUserName = userName;
        window.currentUserLocation = `📍 Currently in ${currentState} • From ${homeState}`;
      }

      function checkOfflineStatus() {
        const banner = document.getElementById("offline-banner");
        if (!navigator.onLine) {
          banner.classList.remove("hidden");
        }

        window.addEventListener("offline", () => {
          banner.classList.remove("hidden");
        });

        window.addEventListener("online", () => {
          banner.classList.add("hidden");
        });
      }

      function getCurrentLanguage() {
        return localStorage.getItem("selectedLanguage") || "en";
      }
    </script>
  </body>
</html>
